<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1514px" preserveAspectRatio="none" style="width:3179px;height:1514px;" version="1.1" viewBox="0 0 3179 1514" width="3179px" zoomAndPan="magnify"><defs><filter height="300%" id="f1eeudog6ssfgt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster go-selector--><polygon fill="#FFFFFF" filter="url(#f1eeudog6ssfgt)" points="51,361,141,361,148,383.4883,1033,383.4883,1033,732,51,732,51,361" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="51" x2="148" y1="383.4883" y2="383.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="55" y="376.5352">go-selector</text><!--cluster go-graphsync--><polygon fill="#FFFFFF" filter="url(#f1eeudog6ssfgt)" points="1041,156,1147,156,1154,178.4883,3157,178.4883,3157,1502,1041,1502,1041,156" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1041" x2="1154" y1="178.4883" y2="178.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="1045" y="171.5352">go-graphsync</text><!--cluster network--><polygon fill="#FFFFFF" filter="url(#f1eeudog6ssfgt)" points="1049,763,1114,763,1121,785.4883,2314,785.4883,2314,1297,1049,1297,1049,763" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1049" x2="1121" y1="785.4883" y2="785.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="1053" y="778.5352">network</text><!--cluster requestmanager--><polygon fill="#FFFFFF" filter="url(#f1eeudog6ssfgt)" points="1797,501,1919,501,1926,523.4883,2758,523.4883,2758,623,1797,623,1797,501" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1797" x2="1926" y1="523.4883" y2="523.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="1801" y="516.5352">requestmanager</text><!--cluster responsemanager--><polygon fill="#FFFFFF" filter="url(#f1eeudog6ssfgt)" points="1049,501,1182,501,1189,523.4883,1778,523.4883,1778,623,1049,623,1049,501" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1049" x2="1189" y1="523.4883" y2="523.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="1053" y="516.5352">responsemanager</text><!--cluster message--><polygon fill="#FFFFFF" filter="url(#f1eeudog6ssfgt)" points="2322,965,2391,965,2398,987.4883,3149,987.4883,3149,1494,2322,1494,2322,965" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2322" x2="2398" y1="987.4883" y2="987.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="2326" y="980.5352">message</text><!--cluster go-filecoin--><polygon fill="#FFFFFF" filter="url(#f1eeudog6ssfgt)" points="908,16,995,16,1002,38.4883,1060,38.4883,1060,125,908,125,908,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="908" x2="1002" y1="38.4883" y2="38.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="912" y="31.5352">go-filecoin</text><!--class Selector--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="48" id="Selector" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="267.5" y="401"/><ellipse cx="282.5" cy="417" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M278.4277,412.7651 L278.4277,410.6069 L285.8071,410.6069 L285.8071,412.7651 L283.3418,412.7651 L283.3418,420.8418 L285.8071,420.8418 L285.8071,423 L278.4277,423 L278.4277,420.8418 L280.8931,420.8418 L280.8931,412.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="296.5" y="421.5352">Selector</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="268.5" x2="343.5" y1="433" y2="433"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="268.5" x2="343.5" y1="441" y2="441"/><!--class SelectionResponse--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="48" id="SelectionResponse" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="59" y="401"/><ellipse cx="74" cy="417" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M69.9277,412.7651 L69.9277,410.6069 L77.3071,410.6069 L77.3071,412.7651 L74.8418,412.7651 L74.8418,420.8418 L77.3071,420.8418 L77.3071,423 L69.9277,423 L69.9277,420.8418 L72.3931,420.8418 L72.3931,412.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="88" y="421.5352">SelectionResponse</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="60" x2="196" y1="433" y2="433"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="60" x2="196" y1="441" y2="441"/><!--class SelectionTraverser--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="73.9102" id="SelectionTraverser" style="stroke: #A80036; stroke-width: 1.5;" width="170" x="380" y="388"/><ellipse cx="409.4" cy="404" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M405.3277,399.7651 L405.3277,397.6069 L412.7071,397.6069 L412.7071,399.7651 L410.2418,399.7651 L410.2418,407.8418 L412.7071,407.8418 L412.7071,410 L405.3277,410 L405.3277,407.8418 L407.7931,407.8418 L407.7931,399.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="426.6" y="408.5352">SelectionTraverser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="381" x2="549" y1="420" y2="420"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="381" x2="549" y1="428" y2="428"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="386" y="442.6348">Next() SelectionResponse, err</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="386" y="455.5898">Cancel()</text><!--class GetBlockFunc--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="48" id="GetBlockFunc" style="stroke: #A80036; stroke-width: 1.5;" width="230" x="59" y="676"/><ellipse cx="74" cy="692" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M69.9277,687.7651 L69.9277,685.6069 L77.3071,685.6069 L77.3071,687.7651 L74.8418,687.7651 L74.8418,695.8418 L77.3071,695.8418 L77.3071,698 L69.9277,698 L69.9277,695.8418 L72.3931,695.8418 L72.3931,687.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="198" x="88" y="696.5352">GetBlockFunc func(cid) block.Block</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="60" x2="288" y1="708" y2="708"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="60" x2="288" y1="716" y2="716"/><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="49.6875" style="stroke: #A80036; stroke-width: 1.5;" width="439" x="585.5" y="400"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="733.5" y="413.6016">Package Public Functions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="586.5" x2="1023.5" y1="418.1328" y2="418.1328"/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="359" x="591.5" y="431.8008">Select(Selector, root Node, getBlockFunc GetBlockFunc) SelectionTraverser</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="427" x="591.5" y="443.5781">Validate(Selector, root Node, incomingResponses SelectionTraverser) SelectionTraverser</text><!--class GraphSync--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="138.6855" id="GraphSync" style="stroke: #A80036; stroke-width: 1.5;" width="460" x="1375" y="183"/><ellipse cx="1570.25" cy="199" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1573.2231,204.6431 Q1572.6421,204.9419 1572.0029,205.0913 Q1571.3638,205.2407 1570.6582,205.2407 Q1568.1514,205.2407 1566.8315,203.5889 Q1565.5117,201.937 1565.5117,198.8159 Q1565.5117,195.6865 1566.8315,194.0347 Q1568.1514,192.3828 1570.6582,192.3828 Q1571.3638,192.3828 1572.0112,192.5322 Q1572.6587,192.6816 1573.2231,192.9805 L1573.2231,195.7031 Q1572.5923,195.1221 1571.9988,194.8523 Q1571.4053,194.5825 1570.7744,194.5825 Q1569.4297,194.5825 1568.7449,195.6492 Q1568.0601,196.7158 1568.0601,198.8159 Q1568.0601,200.9077 1568.7449,201.9744 Q1569.4297,203.041 1570.7744,203.041 Q1571.4053,203.041 1571.9988,202.7712 Q1572.5923,202.5015 1573.2231,201.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="1590.75" y="203.5352">GraphSync</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1376" x2="1834" y1="215" y2="215"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="1381" y="229.6348">network : GraphySyncNetwork</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="1381" y="242.5898">requestManager : RequestManager</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="1381" y="255.5449">responseManager: ResponseManager</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="1381" y="268.5">getBlockFunc: GetBlockFunc</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1376" x2="1834" y1="274.8203" y2="274.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="357" x="1381" y="289.4551">Request(p peer.ID, selector Selector, root Node) SelectionTraverser</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="448" x="1381" y="302.4102">ReceiveMessage(ctx context.Context, sender peer.ID, incoming GraphSyncMessage)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="1381" y="315.3652">ReceiveError(error)</text><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="37.9102" style="stroke: #A80036; stroke-width: 1.5;" width="467" x="1870.5" y="233.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="2036.5" y="247.1016">PackagePublicFunctions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1871.5" x2="2336.5" y1="251.6328" y2="251.6328"/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="455" x="1876.5" y="265.3008">New(ctx context.Context, network GraphSyncNetwork, getBlockFunc GetBlockFunc) GraphSync</text><!--class Receiver--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="73.9102" id="Receiver" style="stroke: #A80036; stroke-width: 1.5;" width="460" x="1846" y="790"/><ellipse cx="2047.25" cy="806" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2043.1777,801.7651 L2043.1777,799.6069 L2050.5571,799.6069 L2050.5571,801.7651 L2048.0918,801.7651 L2048.0918,809.8418 L2050.5571,809.8418 L2050.5571,812 L2043.1777,812 L2043.1777,809.8418 L2045.6431,809.8418 L2045.6431,801.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="49" x="2067.75" y="810.5352">Receiver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1847" x2="2305" y1="822" y2="822"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1847" x2="2305" y1="830" y2="830"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="448" x="1852" y="844.6348">ReceiveMessage(ctx context.Context, sender peer.ID, incoming GraphSyncMessage)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="1852" y="857.5898">ReceiveError(error)</text><!--class GraphSyncNetwork--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="73.9102" id="GraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.5;" width="411" x="1399.5" y="790"/><ellipse cx="1546.25" cy="806" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1542.1777,801.7651 L1542.1777,799.6069 L1549.5571,799.6069 L1549.5571,801.7651 L1547.0918,801.7651 L1547.0918,809.8418 L1549.5571,809.8418 L1549.5571,812 L1542.1777,812 L1542.1777,809.8418 L1544.6431,809.8418 L1544.6431,801.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="109" x="1566.75" y="810.5352">GraphSyncNetwork</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1400.5" x2="1809.5" y1="822" y2="822"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1400.5" x2="1809.5" y1="830" y2="830"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="399" x="1405.5" y="844.6348">SendMessage(ctx context.Context, receiver peer.Id, m GraphSyncMessage)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="1405.5" y="857.5898">SetDelegate(receiver Receiver)</text><!--class libP2PGraphSyncNetwork--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="48" id="libP2PGraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.5;" width="177" x="1516.5" y="1241"/><ellipse cx="1531.5" cy="1257" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1534.4731,1262.6431 Q1533.8921,1262.9419 1533.2529,1263.0913 Q1532.6138,1263.2407 1531.9082,1263.2407 Q1529.4014,1263.2407 1528.0815,1261.5889 Q1526.7617,1259.937 1526.7617,1256.8159 Q1526.7617,1253.6865 1528.0815,1252.0347 Q1529.4014,1250.3828 1531.9082,1250.3828 Q1532.6138,1250.3828 1533.2612,1250.5322 Q1533.9087,1250.6816 1534.4731,1250.9805 L1534.4731,1253.7031 Q1533.8423,1253.1221 1533.2488,1252.8523 Q1532.6553,1252.5825 1532.0244,1252.5825 Q1530.6797,1252.5825 1529.9949,1253.6492 Q1529.3101,1254.7158 1529.3101,1256.8159 Q1529.3101,1258.9077 1529.9949,1259.9744 Q1530.6797,1261.041 1532.0244,1261.041 Q1532.6553,1261.041 1533.2488,1260.7712 Q1533.8423,1260.5015 1534.4731,1259.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="1545.5" y="1261.5352">libP2PGraphSyncNetwork</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1517.5" x2="1692.5" y1="1273" y2="1273"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1517.5" x2="1692.5" y1="1281" y2="1281"/><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="37.9102" style="stroke: #A80036; stroke-width: 1.5;" width="307" x="1057.5" y="808"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="1139.5" y="821.6016">Package Public Functions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1058.5" x2="1363.5" y1="826.1328" y2="826.1328"/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="295" x="1063.5" y="839.8008">NewLibP2PNetwork(host libp2pHost.Host) GraphSyncNetwork</text><!--class RequestManager--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="86.8652" id="RequestManager" style="stroke: #A80036; stroke-width: 1.5;" width="422" x="2328" y="528"/><ellipse cx="2486.25" cy="544" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2489.2231,549.6431 Q2488.6421,549.9419 2488.0029,550.0913 Q2487.3638,550.2407 2486.6582,550.2407 Q2484.1514,550.2407 2482.8315,548.5889 Q2481.5117,546.937 2481.5117,543.8159 Q2481.5117,540.6865 2482.8315,539.0347 Q2484.1514,537.3828 2486.6582,537.3828 Q2487.3638,537.3828 2488.0112,537.5322 Q2488.6587,537.6816 2489.2231,537.9805 L2489.2231,540.7031 Q2488.5923,540.1221 2487.9988,539.8523 Q2487.4053,539.5825 2486.7744,539.5825 Q2485.4297,539.5825 2484.7449,540.6492 Q2484.0601,541.7158 2484.0601,543.8159 Q2484.0601,545.9077 2484.7449,546.9744 Q2485.4297,548.041 2486.7744,548.041 Q2487.4053,548.041 2487.9988,547.7712 Q2488.5923,547.5015 2489.2231,546.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="97" x="2506.75" y="548.5352">RequestManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2329" x2="2749" y1="560" y2="560"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="2334" y="574.6348">network : GraphSyncNetwork</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2329" x2="2749" y1="580.9551" y2="580.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="410" x="2334" y="595.5898">SendRequest(p peer.ID, selector Selector, node rootNode) SelectionTraverser</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="285" x="2334" y="608.5449">ProcessResponses(responses []GraphSyncResponse)</text><path d="M1805.5,543.5 L1805.5,599.4316 L2292.5,599.4316 L2292.5,553.5 L2282.5,543.5 L1805.5,543.5 " fill="#FBFB77" filter="url(#f1eeudog6ssfgt)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2282.5,543.5 L2282.5,553.5 L2292.5,553.5 L2282.5,543.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="339" x="1811.5" y="561.0684">The ResponseManager uses Validate from go-selector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="466" x="1811.5" y="576.3789">to filter incoming Responses based on whether they are valid and produce</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="1811.5" y="591.6895">a traverser that only returns valid responses</text><!--class ResponseManager--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="86.8652" id="ResponseManager" style="stroke: #A80036; stroke-width: 1.5;" width="330" x="1440" y="528"/><ellipse cx="1547.75" cy="544" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1550.7231,549.6431 Q1550.1421,549.9419 1549.5029,550.0913 Q1548.8638,550.2407 1548.1582,550.2407 Q1545.6514,550.2407 1544.3315,548.5889 Q1543.0117,546.937 1543.0117,543.8159 Q1543.0117,540.6865 1544.3315,539.0347 Q1545.6514,537.3828 1548.1582,537.3828 Q1548.8638,537.3828 1549.5112,537.5322 Q1550.1587,537.6816 1550.7231,537.9805 L1550.7231,540.7031 Q1550.0923,540.1221 1549.4988,539.8523 Q1548.9053,539.5825 1548.2744,539.5825 Q1546.9297,539.5825 1546.2449,540.6492 Q1545.5601,541.7158 1545.5601,543.8159 Q1545.5601,545.9077 1546.2449,546.9744 Q1546.9297,548.041 1548.2744,548.041 Q1548.9053,548.041 1549.4988,547.7712 Q1550.0923,547.5015 1550.7231,546.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="1568.25" y="548.5352">ResponseManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1441" x2="1769" y1="560" y2="560"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="1446" y="574.6348">network : GraphySyncNetwork</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="1446" y="587.5898">getBlockFunc : GetBlockFunc</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1441" x2="1769" y1="593.9102" y2="593.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="318" x="1446" y="608.5449">ProcessRequests(p peer.ID, requests []GraphSyncRequests)</text><path d="M1057.5,528 L1057.5,614.5527 L1404.5,614.5527 L1404.5,538 L1394.5,528 L1057.5,528 " fill="#FBFB77" filter="url(#f1eeudog6ssfgt)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1394.5,528 L1394.5,538 L1404.5,538 L1394.5,528 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="1063.5" y="545.5684">The ResponseManager uses Select from go-selector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="1063.5" y="560.8789">to translate the raw bytes into a selector and then</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="1063.5" y="576.1895">traverse the graph to produce a list of blocks</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1067.5" y="591.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="1063.5" y="606.8105">Question: how to know if response is partial?</text><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="37.9102" style="stroke: #A80036; stroke-width: 1.5;" width="321" x="2330.5" y="1036"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="2419.5" y="1049.6016">Package Public Functions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2331.5" x2="2650.5" y1="1054.1328" y2="1054.1328"/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="309" x="2336.5" y="1067.8008">func FromPBReader(pbr ggio.Reader) (GraphSyncMessage, error)</text><!--class GraphSyncRequest--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="125.7305" id="GraphSyncRequest" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="3001" y="992"/><ellipse cx="3016" cy="1008" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3018.9731,1013.6431 Q3018.3921,1013.9419 3017.7529,1014.0913 Q3017.1138,1014.2407 3016.4082,1014.2407 Q3013.9014,1014.2407 3012.5815,1012.5889 Q3011.2617,1010.937 3011.2617,1007.8159 Q3011.2617,1004.6865 3012.5815,1003.0347 Q3013.9014,1001.3828 3016.4082,1001.3828 Q3017.1138,1001.3828 3017.7612,1001.5322 Q3018.4087,1001.6816 3018.9731,1001.9805 L3018.9731,1004.7031 Q3018.3423,1004.1221 3017.7488,1003.8523 Q3017.1553,1003.5825 3016.5244,1003.5825 Q3015.1797,1003.5825 3014.4949,1004.6492 Q3013.8101,1005.7158 3013.8101,1007.8159 Q3013.8101,1009.9077 3014.4949,1010.9744 Q3015.1797,1012.041 3016.5244,1012.041 Q3017.1553,1012.041 3017.7488,1011.7712 Q3018.3423,1011.5015 3018.9731,1010.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="3030" y="1012.5352">GraphSyncRequest</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3002" x2="3140" y1="1024" y2="1024"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="3007" y="1038.6348">Selector Selector</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="3007" y="1051.5898">Root     Node</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="3007" y="1064.5449">Priority Priority</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="3007" y="1077.5">Expires time.Duration</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="3007" y="1090.4551">Id       int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="3007" y="1103.4102">IsCancel bool</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3002" x2="3140" y1="1109.7305" y2="1109.7305"/><!--class GraphSyncResponse--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="73.9102" id="GraphSyncResponse" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="2816.5" y="1018"/><ellipse cx="2831.5" cy="1034" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2834.4731,1039.6431 Q2833.8921,1039.9419 2833.2529,1040.0913 Q2832.6138,1040.2407 2831.9082,1040.2407 Q2829.4014,1040.2407 2828.0815,1038.5889 Q2826.7617,1036.937 2826.7617,1033.8159 Q2826.7617,1030.6865 2828.0815,1029.0347 Q2829.4014,1027.3828 2831.9082,1027.3828 Q2832.6138,1027.3828 2833.2612,1027.5322 Q2833.9087,1027.6816 2834.4731,1027.9805 L2834.4731,1030.7031 Q2833.8423,1030.1221 2833.2488,1029.8523 Q2832.6553,1029.5825 2832.0244,1029.5825 Q2830.6797,1029.5825 2829.9949,1030.6492 Q2829.3101,1031.7158 2829.3101,1033.8159 Q2829.3101,1035.9077 2829.9949,1036.9744 Q2830.6797,1038.041 2832.0244,1038.041 Q2832.6553,1038.041 2833.2488,1037.7712 Q2833.8423,1037.5015 2834.4731,1036.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="2845.5" y="1038.5352">GraphSyncResponse</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2817.5" x2="2964.5" y1="1050" y2="1050"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="2822.5" y="1064.6348">RequestId int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="2822.5" y="1077.5898">Status GraphSyncStatus</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2817.5" x2="2964.5" y1="1083.9102" y2="1083.9102"/><!--class GraphSyncMessage--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="73.9102" id="GraphSyncMessage" style="stroke: #A80036; stroke-width: 1.5;" width="205" x="2788.5" y="1412"/><ellipse cx="2831.4" cy="1428" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2827.3277,1423.7651 L2827.3277,1421.6069 L2834.7071,1421.6069 L2834.7071,1423.7651 L2832.2418,1423.7651 L2832.2418,1431.8418 L2834.7071,1431.8418 L2834.7071,1434 L2827.3277,1434 L2827.3277,1431.8418 L2829.7931,1431.8418 L2829.7931,1423.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="111" x="2851.6" y="1432.5352">GraphSyncMessage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2789.5" x2="2992.5" y1="1444" y2="1444"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2789.5" x2="2992.5" y1="1452" y2="1452"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="175" x="2794.5" y="1466.6348">Requests() : []GraphSyncRequest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="193" x="2794.5" y="1479.5898">Responses() : []GraphSyncResponse</text><!--class Exportable--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="73.9102" id="Exportable" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="2686.5" y="1018"/><ellipse cx="2701.5" cy="1034" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2697.4277,1029.7651 L2697.4277,1027.6069 L2704.8071,1027.6069 L2704.8071,1029.7651 L2702.3418,1029.7651 L2702.3418,1037.8418 L2704.8071,1037.8418 L2704.8071,1040 L2697.4277,1040 L2697.4277,1037.8418 L2699.8931,1037.8418 L2699.8931,1029.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="63" x="2715.5" y="1038.5352">Exportable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2687.5" x2="2780.5" y1="1050" y2="1050"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2687.5" x2="2780.5" y1="1058" y2="1058"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="2692.5" y="1072.6348">ToProtoV0()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="2692.5" y="1085.5898">ToProtoV1()</text><!--class go-filecoin--><rect fill="#FEFECE" filter="url(#f1eeudog6ssfgt)" height="73.9102" id="go-filecoin" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="916" y="43"/><ellipse cx="950.35" cy="59" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M953.3231,64.6431 Q952.7421,64.9419 952.1029,65.0913 Q951.4638,65.2407 950.7582,65.2407 Q948.2514,65.2407 946.9315,63.5889 Q945.6117,61.937 945.6117,58.8159 Q945.6117,55.6865 946.9315,54.0347 Q948.2514,52.3828 950.7582,52.3828 Q951.4638,52.3828 952.1112,52.5322 Q952.7587,52.6816 953.3231,52.9805 L953.3231,55.7031 Q952.6923,55.1221 952.0988,54.8523 Q951.5053,54.5825 950.8744,54.5825 Q949.5297,54.5825 948.8449,55.6492 Q948.1601,56.7158 948.1601,58.8159 Q948.1601,60.9077 948.8449,61.9744 Q949.5297,63.041 950.8744,63.041 Q951.5053,63.041 952.0988,62.7712 Q952.6923,62.5015 953.3231,61.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="968.65" y="63.5352">go-filecoin</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="917" x2="1051" y1="75" y2="75"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="922" y="89.6348">graphSync : GraphSync</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="922" y="102.5898">host: libp2pHost.Host</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="917" x2="1051" y1="108.9102" y2="108.9102"/><path d="M98.5,240 L98.5,265.3105 L365.5,265.3105 L365.5,250 L355.5,240 L98.5,240 " fill="#FBFB77" filter="url(#f1eeudog6ssfgt)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M355.5,240 L355.5,250 L365.5,250 L355.5,240 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="104.5" y="257.5684">Is this the right name for this package?</text><!--link GMN3 to go-selector--><path d="M232,265.1843 C232,284.169 232,321.355 232,355.0824 C232,356.1364 232,357.187 232,358.2336 C232,358.7569 232,359.2791 232,359.8003 C232,360.0609 232,360.3212 232,360.5813 " fill="none" id="GMN3-go-selector" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link Receiver to GraphSync--><path d="M2326.1051,807.5642 C2542.2029,787.2824 2820,751.2442 2820,700 C2820,425 2820,425 2820,425 C2820,316.9478 1959.1144,342.372 1853,322 C1847.0718,320.8619 1841.0792,319.6506 1835.0455,318.3769 " fill="none" id="Receiver-GraphSync" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2326.6165,814.5467,2306.057,809.4176,2325.3277,800.6061,2326.6165,814.5467" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="2821" y="576.5684">receiver for</text><!--link GraphSyncNetwork to libP2PGraphSyncNetwork--><path d="M1605,884.5862 C1605,898.0139 1605,912.2576 1605,925.5 C1605,925.5 1605,925.5 1605,1179.5 C1605,1200.1328 1605,1223.5664 1605,1240.6764 " fill="none" id="GraphSyncNetwork-libP2PGraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1598.0001,884.4186,1605,864.4186,1612.0001,884.4185,1598.0001,884.4186" style="stroke: #A80036; stroke-width: 1.0;"/><!--link goGraphSyncNetworkPF to libP2PGraphSyncNetwork--><path d="M1311.4444,846.0351 C1351.8198,860.0514 1389,884.177 1389,925.5 C1389,925.5 1389,925.5 1389,1179.5 C1389,1208.3871 1456.6337,1231.7171 1516.2095,1246.6641 " fill="none" id="goGraphSyncNetworkPF-libP2PGraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link goSelectorPF to RequestManager--><path d="M947.9621,450.0127 C976.094,454.4218 1005.4313,458.6616 1033,462 C1203.8597,482.6903 1247.0629,485.3336 1419,493 C1468.4529,495.205 2261.0824,493.4158 2310,501 C2346.6882,506.6881 2385.6287,516.979 2420.7919,527.972 " fill="none" id="goSelectorPF-RequestManager" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link RequestManager to GraphSyncNetwork--><path d="M2341.2018,617.5164 C2330.6709,619.4862 2320.2217,621.3313 2310,623 C2215.6368,638.4052 2189.1227,623.3229 2096,645 C1946.8043,679.7298 1781.2941,747.5892 1685.5823,789.9201 " fill="none" id="RequestManager-GraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2354.0778,615.0552,2347.4335,612.2529,2342.2912,617.3083,2348.9355,620.1106,2354.0778,615.0552" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GraphSync to RequestManager--><path d="M1821.0161,326.2785 C2003.8947,388.7392 2259.8278,476.151 2411.5918,527.9848 " fill="none" id="GraphSync-RequestManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1808.5279,322.0133,1812.913,327.7379,1819.8838,325.8919,1815.4987,320.1673,1808.5279,322.0133" style="stroke: #A80036; stroke-width: 1.0;"/><!--link goSelectorPF to ResponseManager--><path d="M950.7623,450.0107 C978.0476,454.307 1006.3603,458.5063 1033,462 C1076.0701,467.6484 1379.7432,490.9353 1422,501 C1449.9868,507.6659 1479.436,517.6123 1506.3331,527.9474 " fill="none" id="goSelectorPF-ResponseManager" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link ResponseManager to GraphSyncNetwork--><path d="M1605,628.4322 C1605,677.6576 1605,747.3912 1605,789.7771 " fill="none" id="ResponseManager-GraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1605,615.1317,1601,621.1317,1605,627.1317,1609,621.1317,1605,615.1317" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GraphSync to ResponseManager--><path d="M1605,335.2949 C1605,396.7399 1605,478.1186 1605,527.5466 " fill="none" id="GraphSync-ResponseManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1605,322.1117,1601,328.1117,1605,334.1117,1609,328.1117,1605,322.1117" style="stroke: #A80036; stroke-width: 1.0;"/><!--link goGraphSyncMessagePF to libP2PGraphSyncNetwork--><path d="M2445.7334,1074.0546 C2412.0613,1087.6906 2364.7382,1105.7326 2322,1118 C2099.2534,1181.9363 1829.9875,1229.3809 1693.5308,1251.3824 " fill="none" id="goGraphSyncMessagePF-libP2PGraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link Exportable to GraphSyncMessage--><path d="M2762.5942,1092.0406 C2778.0479,1115.7174 2794,1147.8283 2794,1179.5 C2794,1179.5 2794,1179.5 2794,1350.5 C2794,1368.4611 2802.2892,1384.3385 2814.0213,1397.8156 " fill="none" id="Exportable-GraphSyncMessage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2819.0989,1392.9908,2828.4717,1411.9949,2809.2936,1402.9837,2819.0989,1392.9908" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GraphSyncRequest to GraphSyncMessage--><path d="M3018.1056,1118.0582 C3007.2202,1136.6854 2999,1157.902 2999,1179.5 C2999,1179.5 2999,1179.5 2999,1350.5 C2999,1371.4103 2987.8112,1389.0644 2972.6364,1403.3922 " fill="none" id="GraphSyncRequest-GraphSyncMessage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2962.7371,1411.8828,2969.8955,1411.0127,2971.8456,1404.0703,2964.6872,1404.9404,2962.7371,1411.8828" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GraphSyncResponse to GraphSyncMessage--><path d="M2891,1092.0445 C2891,1116.8042 2891,1150.1042 2891,1179.5 C2891,1179.5 2891,1179.5 2891,1350.5 C2891,1366.1071 2891,1383.1051 2891,1398.5188 " fill="none" id="GraphSyncResponse-GraphSyncMessage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2891,1411.5814,2895,1405.5814,2891,1399.5814,2887,1405.5814,2891,1411.5814" style="stroke: #A80036; stroke-width: 1.0;"/><!--link go-filecoin to GraphSync--><path d="M1064.9161,102.4767 C1143.3786,124.2718 1266.1616,158.3782 1374.8427,188.5674 " fill="none" id="go-filecoin-GraphSync" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1052.2343,98.954,1056.9448,104.414,1063.7965,102.1658,1059.086,96.7058,1052.2343,98.954" style="stroke: #A80036; stroke-width: 1.0;"/><!--link go-filecoin to goGraphsyncPf--><path d="M1052.139,83.4933 C1229.2234,92.9657 1700.7426,120.8094 1853,156 C1930.5551,173.925 2016.1421,210.7785 2064.6607,233.396 " fill="none" id="go-filecoin-goGraphsyncPf" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link go-filecoin to goGraphSyncNetworkPF--><path d="M915.813,82.5936 C718.0756,90.551 153.8175,116.4991 81,156 C33.2536,181.9007 6,198.1809 6,252.5 C6,252.5 6,252.5 6,700 C6,721.7415 22.9504,723.5914 43,732 C134.2575,770.2724 761.4559,805.2434 1057.243,819.8245 " fill="none" id="go-filecoin-goGraphSyncNetworkPF" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link go-filecoin to Selector--><path d="M915.6818,100.4409 C795.7968,138.4842 543.1839,228.5025 363,361 C347.8964,372.1064 333.8522,387.7838 323.4835,400.8422 " fill="none" id="go-filecoin-Selector" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link SelectionResponse to SelectionTraverser--><!--link SelectionResponse to GetBlockFunc--><!--
@startuml "GraphSync"

note top of "go-selector"
  Is this the right name for this package?
end note

package "go-selector" {

  interface Selector {
  }
  
  interface SelectionResponse {
  }
  
  interface SelectionTraverser {
    Next() SelectionResponse, err
    Cancel()
  }

  interface "GetBlockFunc func(cid) block.Block" as GetBlockFunc

  object "Package Public Functions" as goSelectorPF {
    Select(Selector, root Node, getBlockFunc GetBlockFunc) SelectionTraverser
    Validate(Selector, root Node, incomingResponses SelectionTraverser) SelectionTraverser
  }
}

package "go-graphsync" {
    class GraphSync {
      network : GraphySyncNetwork
      requestManager : RequestManager
      responseManager: ResponseManager
      getBlockFunc: GetBlockFunc

      Request(p peer.ID, selector Selector, root Node) SelectionTraverser
      ReceiveMessage(ctx context.Context, sender peer.ID, incoming GraphSyncMessage)
      ReceiveError(error)
    }
  

  package network {
    interface Receiver {
      ReceiveMessage(ctx context.Context, sender peer.ID, incoming GraphSyncMessage)
      ReceiveError(error)
    }

    interface GraphSyncNetwork {
      SendMessage(ctx context.Context, receiver peer.Id, m GraphSyncMessage)
      SetDelegate(receiver Receiver)
    }

    Receiver <|- - GraphSync : receiver for

    class libP2PGraphSyncNetwork {

    }
    GraphSyncNetwork <|- - libP2PGraphSyncNetwork
    
    object "Package Public Functions" as goGraphSyncNetworkPF {
      NewLibP2PNetwork(host libp2pHost.Host) GraphSyncNetwork
    }
    goGraphSyncNetworkPF .. libP2PGraphSyncNetwork 
  }

  package requestmanager {
  class RequestManager {
    network : GraphSyncNetwork
    SendRequest(p peer.ID, selector Selector, node rootNode) SelectionTraverser
    ProcessResponses(responses []GraphSyncResponse)
  }
  goSelectorPF .. RequestManager
  RequestManager *- - GraphSyncNetwork
  GraphSync *- - RequestManager
  note as requestManager
    The ResponseManager uses Validate from go-selector
    to filter incoming Responses based on whether they are valid and produce
    a traverser that only returns valid responses
  end note
  }

  package responsemanager {
  class ResponseManager {
    network : GraphySyncNetwork
    getBlockFunc : GetBlockFunc
    ProcessRequests(p peer.ID, requests []GraphSyncRequests)
  }
  goSelectorPF .. ResponseManager
  ResponseManager *- - GraphSyncNetwork
  GraphSync *- - ResponseManager
  note as responseManagerNote
    The ResponseManager uses Select from go-selector
    to translate the raw bytes into a selector and then
    traverse the graph to produce a list of blocks

    Question: how to know if response is partial?
  end note
  }
  package message {
    object "Package Public Functions" as goGraphSyncMessagePF {
      func FromPBReader(pbr ggio.Reader) (GraphSyncMessage, error)
    }
    goGraphSyncMessagePF .. libP2PGraphSyncNetwork

    class GraphSyncRequest {
      Selector Selector
      Root     Node
      Priority Priority
      {field} Expires time.Duration
      Id       int
      IsCancel bool
    }

    class GraphSyncResponse {
      RequestId int
      Status GraphSyncStatus
    }

    interface GraphSyncMessage {
      Requests() : []GraphSyncRequest
      Responses() : []GraphSyncResponse
    }

    interface Exportable {
      ToProtoV0()
      ToProtoV1()
	  }

    Exportable - -|> GraphSyncMessage
    GraphSyncRequest - -* GraphSyncMessage
    GraphSyncResponse - -* GraphSyncMessage
    
  }

  object "PackagePublicFunctions" as goGraphsyncPf {
    New(ctx context.Context, network GraphSyncNetwork, getBlockFunc GetBlockFunc) GraphSync
  }

}

package "go-filecoin" {
  class "go-filecoin" {
    graphSync : GraphSync
    host: libp2pHost.Host
  }

  "go-filecoin" *- - GraphSync
  "go-filecoin" .. goGraphsyncPf
  "go-filecoin" .. goGraphSyncNetworkPF
  "go-filecoin" .. Selector
}

@enduml

PlantUML version 1.2018.12(Sun Oct 21 03:15:15 PDT 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_92-b14
Operating System: Mac OS X
OS Version: 10.13.2
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>