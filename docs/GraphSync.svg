<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1540px" preserveAspectRatio="none" style="width:3550px;height:1540px;" version="1.1" viewBox="0 0 3550 1540" width="3550px" zoomAndPan="magnify"><defs><filter height="300%" id="f1o7j4nhm0njmc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster go-selector--><polygon fill="#FFFFFF" filter="url(#f1o7j4nhm0njmc)" points="14,374,104,374,111,396.4883,1403,396.4883,1403,758,14,758,14,374" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="111" y1="396.4883" y2="396.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="18" y="389.5352">go-selector</text><!--cluster go-graphsync--><polygon fill="#FFFFFF" filter="url(#f1o7j4nhm0njmc)" points="1411,169,1517,169,1524,191.4883,3528,191.4883,3528,1528,1411,1528,1411,169" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1411" x2="1524" y1="191.4883" y2="191.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="1415" y="184.5352">go-graphsync</text><!--cluster network--><polygon fill="#FFFFFF" filter="url(#f1o7j4nhm0njmc)" points="1419,789,1484,789,1491,811.4883,2685,811.4883,2685,1323,1419,1323,1419,789" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1419" x2="1491" y1="811.4883" y2="811.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="1423" y="804.5352">network</text><!--cluster requestmanager--><polygon fill="#FFFFFF" filter="url(#f1o7j4nhm0njmc)" points="2167,514,2289,514,2296,536.4883,3128,536.4883,3128,649,2167,649,2167,514" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2167" x2="2296" y1="536.4883" y2="536.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="2171" y="529.5352">requestmanager</text><!--cluster responsemanager--><polygon fill="#FFFFFF" filter="url(#f1o7j4nhm0njmc)" points="1419,520.5,1552,520.5,1559,542.9883,2148,542.9883,2148,642.5,1419,642.5,1419,520.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1419" x2="1559" y1="542.9883" y2="542.9883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="1423" y="536.0352">responsemanager</text><!--cluster message--><polygon fill="#FFFFFF" filter="url(#f1o7j4nhm0njmc)" points="2693,991,2762,991,2769,1013.4883,3520,1013.4883,3520,1520,2693,1520,2693,991" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2693" x2="2769" y1="1013.4883" y2="1013.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="2697" y="1006.5352">message</text><!--cluster go-filecoin--><polygon fill="#FFFFFF" filter="url(#f1o7j4nhm0njmc)" points="1253,16,1340,16,1347,38.4883,1455,38.4883,1455,138,1253,138,1253,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1253" x2="1347" y1="38.4883" y2="38.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="1257" y="31.5352">go-filecoin</text><!--class Selector--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="48" id="Selector" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="22.5" y="414"/><ellipse cx="37.5" cy="430" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M33.4277,425.7651 L33.4277,423.6069 L40.8071,423.6069 L40.8071,425.7651 L38.3418,425.7651 L38.3418,433.8418 L40.8071,433.8418 L40.8071,436 L33.4277,436 L33.4277,433.8418 L35.8931,433.8418 L35.8931,425.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="45" x="51.5" y="434.5352">Selector</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="98.5" y1="446" y2="446"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="98.5" y1="454" y2="454"/><!--class SelectionResponse--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="48" id="SelectionResponse" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="496" y="414"/><ellipse cx="511" cy="430" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M506.9277,425.7651 L506.9277,423.6069 L514.3071,423.6069 L514.3071,425.7651 L511.8418,425.7651 L511.8418,433.8418 L514.3071,433.8418 L514.3071,436 L506.9277,436 L506.9277,433.8418 L509.3931,433.8418 L509.3931,425.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="525" y="434.5352">SelectionResponse</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="497" x2="633" y1="446" y2="446"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="497" x2="633" y1="454" y2="454"/><!--class SelectionTraverser--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="73.9102" id="SelectionTraverser" style="stroke: #A80036; stroke-width: 1.5;" width="170" x="669" y="401"/><ellipse cx="698.4" cy="417" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M694.3277,412.7651 L694.3277,410.6069 L701.7071,410.6069 L701.7071,412.7651 L699.2418,412.7651 L699.2418,420.8418 L701.7071,420.8418 L701.7071,423 L694.3277,423 L694.3277,420.8418 L696.7931,420.8418 L696.7931,412.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="715.6" y="421.5352">SelectionTraverser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="670" x2="838" y1="433" y2="433"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="670" x2="838" y1="441" y2="441"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="675" y="455.6348">Next() SelectionResponse, err</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="675" y="468.5898">Cancel()</text><!--class GetBlockFunc--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="48" id="GetBlockFunc" style="stroke: #A80036; stroke-width: 1.5;" width="230" x="450" y="702"/><ellipse cx="465" cy="718" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M460.9277,713.7651 L460.9277,711.6069 L468.3071,711.6069 L468.3071,713.7651 L465.8418,713.7651 L465.8418,721.8418 L468.3071,721.8418 L468.3071,724 L460.9277,724 L460.9277,721.8418 L463.3931,721.8418 L463.3931,713.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="198" x="479" y="722.5352">GetBlockFunc func(cid) block.Block</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="451" x2="679" y1="734" y2="734"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="451" x2="679" y1="742" y2="742"/><!--class SelectorQuerier--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="73.9102" id="SelectorQuerier" style="stroke: #A80036; stroke-width: 1.5;" width="485" x="909.5" y="401"/><ellipse cx="1103.75" cy="417" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1099.6777,412.7651 L1099.6777,410.6069 L1107.0571,410.6069 L1107.0571,412.7651 L1104.5918,412.7651 L1104.5918,420.8418 L1107.0571,420.8418 L1107.0571,423 L1099.6777,423 L1099.6777,420.8418 L1102.1431,420.8418 L1102.1431,412.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="88" x="1124.25" y="421.5352">SelectorQuerier</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="910.5" x2="1393.5" y1="433" y2="433"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="910.5" x2="1393.5" y1="441" y2="441"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="245" x="915.5" y="455.6348">Select(Selector, root Node) SelectionTraverser</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="473" x="915.5" y="468.5898">Validate(Selector, root Node, incomingResponses SelectionTraverser) SelectionTraverser</text><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="37.9102" style="stroke: #A80036; stroke-width: 1.5;" width="326" x="135" y="419"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="226.5" y="432.6016">Package Public Functions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="136" x2="460" y1="437.1328" y2="437.1328"/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="314" x="141" y="450.8008">NewSelectorQuerier(getBlockFunc GetBlockFunc) SelectorQuerier</text><!--class GraphSync--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="138.6855" id="GraphSync" style="stroke: #A80036; stroke-width: 1.5;" width="460" x="1501" y="196"/><ellipse cx="1696.25" cy="212" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1699.2231,217.6431 Q1698.6421,217.9419 1698.0029,218.0913 Q1697.3638,218.2407 1696.6582,218.2407 Q1694.1514,218.2407 1692.8315,216.5889 Q1691.5117,214.937 1691.5117,211.8159 Q1691.5117,208.6865 1692.8315,207.0347 Q1694.1514,205.3828 1696.6582,205.3828 Q1697.3638,205.3828 1698.0112,205.5322 Q1698.6587,205.6816 1699.2231,205.9805 L1699.2231,208.7031 Q1698.5923,208.1221 1697.9988,207.8523 Q1697.4053,207.5825 1696.7744,207.5825 Q1695.4297,207.5825 1694.7449,208.6492 Q1694.0601,209.7158 1694.0601,211.8159 Q1694.0601,213.9077 1694.7449,214.9744 Q1695.4297,216.041 1696.7744,216.041 Q1697.4053,216.041 1697.9988,215.7712 Q1698.5923,215.5015 1699.2231,214.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="1716.75" y="216.5352">GraphSync</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1502" x2="1960" y1="228" y2="228"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="1507" y="242.6348">network : GraphySyncNetwork</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="1507" y="255.5898">requestManager : RequestManager</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="1507" y="268.5449">responseManager: ResponseManager</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="1507" y="281.5">selectorQuerier: SelectorQuerier</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1502" x2="1960" y1="287.8203" y2="287.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="357" x="1507" y="302.4551">Request(p peer.ID, selector Selector, root Node) SelectionTraverser</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="448" x="1507" y="315.4102">ReceiveMessage(ctx context.Context, sender peer.ID, incoming GraphSyncMessage)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="1507" y="328.3652">ReceiveError(error)</text><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="37.9102" style="stroke: #A80036; stroke-width: 1.5;" width="467" x="1996.5" y="246.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="2162.5" y="260.1016">PackagePublicFunctions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1997.5" x2="2462.5" y1="264.6328" y2="264.6328"/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="455" x="2002.5" y="278.3008">New(ctx context.Context, network GraphSyncNetwork, getBlockFunc GetBlockFunc) GraphSync</text><!--class Receiver--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="73.9102" id="Receiver" style="stroke: #A80036; stroke-width: 1.5;" width="460" x="1874" y="816"/><ellipse cx="2075.25" cy="832" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2071.1777,827.7651 L2071.1777,825.6069 L2078.5571,825.6069 L2078.5571,827.7651 L2076.0918,827.7651 L2076.0918,835.8418 L2078.5571,835.8418 L2078.5571,838 L2071.1777,838 L2071.1777,835.8418 L2073.6431,835.8418 L2073.6431,827.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="49" x="2095.75" y="836.5352">Receiver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1875" x2="2333" y1="848" y2="848"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1875" x2="2333" y1="856" y2="856"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="448" x="1880" y="870.6348">ReceiveMessage(ctx context.Context, sender peer.ID, incoming GraphSyncMessage)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="1880" y="883.5898">ReceiveError(error)</text><!--class GraphSyncNetwork--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="73.9102" id="GraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.5;" width="411" x="1427.5" y="816"/><ellipse cx="1574.25" cy="832" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1570.1777,827.7651 L1570.1777,825.6069 L1577.5571,825.6069 L1577.5571,827.7651 L1575.0918,827.7651 L1575.0918,835.8418 L1577.5571,835.8418 L1577.5571,838 L1570.1777,838 L1570.1777,835.8418 L1572.6431,835.8418 L1572.6431,827.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="109" x="1594.75" y="836.5352">GraphSyncNetwork</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1428.5" x2="1837.5" y1="848" y2="848"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1428.5" x2="1837.5" y1="856" y2="856"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="399" x="1433.5" y="870.6348">SendMessage(ctx context.Context, receiver peer.Id, m GraphSyncMessage)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="1433.5" y="883.5898">SetDelegate(receiver Receiver)</text><!--class libP2PGraphSyncNetwork--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="48" id="libP2PGraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.5;" width="177" x="2434.5" y="1267"/><ellipse cx="2449.5" cy="1283" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2452.4731,1288.6431 Q2451.8921,1288.9419 2451.2529,1289.0913 Q2450.6138,1289.2407 2449.9082,1289.2407 Q2447.4014,1289.2407 2446.0815,1287.5889 Q2444.7617,1285.937 2444.7617,1282.8159 Q2444.7617,1279.6865 2446.0815,1278.0347 Q2447.4014,1276.3828 2449.9082,1276.3828 Q2450.6138,1276.3828 2451.2612,1276.5322 Q2451.9087,1276.6816 2452.4731,1276.9805 L2452.4731,1279.7031 Q2451.8423,1279.1221 2451.2488,1278.8523 Q2450.6553,1278.5825 2450.0244,1278.5825 Q2448.6797,1278.5825 2447.9949,1279.6492 Q2447.3101,1280.7158 2447.3101,1282.8159 Q2447.3101,1284.9077 2447.9949,1285.9744 Q2448.6797,1287.041 2450.0244,1287.041 Q2450.6553,1287.041 2451.2488,1286.7712 Q2451.8423,1286.5015 2452.4731,1285.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="2463.5" y="1287.5352">libP2PGraphSyncNetwork</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2435.5" x2="2610.5" y1="1299" y2="1299"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2435.5" x2="2610.5" y1="1307" y2="1307"/><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="37.9102" style="stroke: #A80036; stroke-width: 1.5;" width="307" x="2369.5" y="834"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="2451.5" y="847.6016">Package Public Functions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2370.5" x2="2675.5" y1="852.1328" y2="852.1328"/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="295" x="2375.5" y="865.8008">NewLibP2PNetwork(host libp2pHost.Host) GraphSyncNetwork</text><!--class RequestManager--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="99.8203" id="RequestManager" style="stroke: #A80036; stroke-width: 1.5;" width="422" x="2698" y="541"/><ellipse cx="2856.25" cy="557" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2859.2231,562.6431 Q2858.6421,562.9419 2858.0029,563.0913 Q2857.3638,563.2407 2856.6582,563.2407 Q2854.1514,563.2407 2852.8315,561.5889 Q2851.5117,559.937 2851.5117,556.8159 Q2851.5117,553.6865 2852.8315,552.0347 Q2854.1514,550.3828 2856.6582,550.3828 Q2857.3638,550.3828 2858.0112,550.5322 Q2858.6587,550.6816 2859.2231,550.9805 L2859.2231,553.7031 Q2858.5923,553.1221 2857.9988,552.8523 Q2857.4053,552.5825 2856.7744,552.5825 Q2855.4297,552.5825 2854.7449,553.6492 Q2854.0601,554.7158 2854.0601,556.8159 Q2854.0601,558.9077 2854.7449,559.9744 Q2855.4297,561.041 2856.7744,561.041 Q2857.4053,561.041 2857.9988,560.7712 Q2858.5923,560.5015 2859.2231,559.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="97" x="2876.75" y="561.5352">RequestManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2699" x2="3119" y1="573" y2="573"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="2704" y="587.6348">network : GraphSyncNetwork</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="2704" y="600.5898">selectorQuerier: SelectorQuerier</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2699" x2="3119" y1="606.9102" y2="606.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="410" x="2704" y="621.5449">SendRequest(p peer.ID, selector Selector, node rootNode) SelectionTraverser</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="285" x="2704" y="634.5">ProcessResponses(responses []GraphSyncResponse)</text><path d="M2175.5,563 L2175.5,618.9316 L2662.5,618.9316 L2662.5,573 L2652.5,563 L2175.5,563 " fill="#FBFB77" filter="url(#f1o7j4nhm0njmc)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2652.5,563 L2652.5,573 L2662.5,573 L2652.5,563 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="339" x="2181.5" y="580.5684">The ResponseManager uses Validate from go-selector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="466" x="2181.5" y="595.8789">to filter incoming Responses based on whether they are valid and produce</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="2181.5" y="611.1895">a traverser that only returns valid responses</text><!--class ResponseManager--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="86.8652" id="ResponseManager" style="stroke: #A80036; stroke-width: 1.5;" width="330" x="1810" y="547.5"/><ellipse cx="1917.75" cy="563.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1920.7231,569.1431 Q1920.1421,569.4419 1919.5029,569.5913 Q1918.8638,569.7407 1918.1582,569.7407 Q1915.6514,569.7407 1914.3315,568.0889 Q1913.0117,566.437 1913.0117,563.3159 Q1913.0117,560.1865 1914.3315,558.5347 Q1915.6514,556.8828 1918.1582,556.8828 Q1918.8638,556.8828 1919.5112,557.0322 Q1920.1587,557.1816 1920.7231,557.4805 L1920.7231,560.2031 Q1920.0923,559.6221 1919.4988,559.3523 Q1918.9053,559.0825 1918.2744,559.0825 Q1916.9297,559.0825 1916.2449,560.1492 Q1915.5601,561.2158 1915.5601,563.3159 Q1915.5601,565.4077 1916.2449,566.4744 Q1916.9297,567.541 1918.2744,567.541 Q1918.9053,567.541 1919.4988,567.2712 Q1920.0923,567.0015 1920.7231,566.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="1938.25" y="568.0352">ResponseManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1811" x2="2139" y1="579.5" y2="579.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="1816" y="594.1348">network : GraphySyncNetwork</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="1816" y="607.0898">selectorQuerier: SelectorQuerier</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1811" x2="2139" y1="613.4102" y2="613.4102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="318" x="1816" y="628.0449">ProcessRequests(p peer.ID, requests []GraphSyncRequests)</text><path d="M1427.5,547.5 L1427.5,634.0527 L1774.5,634.0527 L1774.5,557.5 L1764.5,547.5 L1427.5,547.5 " fill="#FBFB77" filter="url(#f1o7j4nhm0njmc)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1764.5,547.5 L1764.5,557.5 L1774.5,557.5 L1764.5,547.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="1433.5" y="565.0684">The ResponseManager uses Select from go-selector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="1433.5" y="580.3789">to translate the raw bytes into a selector and then</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="1433.5" y="595.6895">traverse the graph to produce a list of blocks</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1437.5" y="611"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="1433.5" y="626.3105">Question: how to know if response is partial?</text><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="37.9102" style="stroke: #A80036; stroke-width: 1.5;" width="321" x="2701.5" y="1062"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="2790.5" y="1075.6016">Package Public Functions</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2702.5" x2="3021.5" y1="1080.1328" y2="1080.1328"/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="309" x="2707.5" y="1093.8008">func FromPBReader(pbr ggio.Reader) (GraphSyncMessage, error)</text><!--class GraphSyncRequest--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="125.7305" id="GraphSyncRequest" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="3372" y="1018"/><ellipse cx="3387" cy="1034" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3389.9731,1039.6431 Q3389.3921,1039.9419 3388.7529,1040.0913 Q3388.1138,1040.2407 3387.4082,1040.2407 Q3384.9014,1040.2407 3383.5815,1038.5889 Q3382.2617,1036.937 3382.2617,1033.8159 Q3382.2617,1030.6865 3383.5815,1029.0347 Q3384.9014,1027.3828 3387.4082,1027.3828 Q3388.1138,1027.3828 3388.7612,1027.5322 Q3389.4087,1027.6816 3389.9731,1027.9805 L3389.9731,1030.7031 Q3389.3423,1030.1221 3388.7488,1029.8523 Q3388.1553,1029.5825 3387.5244,1029.5825 Q3386.1797,1029.5825 3385.4949,1030.6492 Q3384.8101,1031.7158 3384.8101,1033.8159 Q3384.8101,1035.9077 3385.4949,1036.9744 Q3386.1797,1038.041 3387.5244,1038.041 Q3388.1553,1038.041 3388.7488,1037.7712 Q3389.3423,1037.5015 3389.9731,1036.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="3401" y="1038.5352">GraphSyncRequest</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3373" x2="3511" y1="1050" y2="1050"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="3378" y="1064.6348">Selector Selector</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="3378" y="1077.5898">Root     Node</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="3378" y="1090.5449">Priority Priority</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="3378" y="1103.5">Expires time.Duration</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="3378" y="1116.4551">Id       int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="3378" y="1129.4102">IsCancel bool</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3373" x2="3511" y1="1135.7305" y2="1135.7305"/><!--class GraphSyncResponse--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="73.9102" id="GraphSyncResponse" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="3187.5" y="1044"/><ellipse cx="3202.5" cy="1060" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3205.4731,1065.6431 Q3204.8921,1065.9419 3204.2529,1066.0913 Q3203.6138,1066.2407 3202.9082,1066.2407 Q3200.4014,1066.2407 3199.0815,1064.5889 Q3197.7617,1062.937 3197.7617,1059.8159 Q3197.7617,1056.6865 3199.0815,1055.0347 Q3200.4014,1053.3828 3202.9082,1053.3828 Q3203.6138,1053.3828 3204.2612,1053.5322 Q3204.9087,1053.6816 3205.4731,1053.9805 L3205.4731,1056.7031 Q3204.8423,1056.1221 3204.2488,1055.8523 Q3203.6553,1055.5825 3203.0244,1055.5825 Q3201.6797,1055.5825 3200.9949,1056.6492 Q3200.3101,1057.7158 3200.3101,1059.8159 Q3200.3101,1061.9077 3200.9949,1062.9744 Q3201.6797,1064.041 3203.0244,1064.041 Q3203.6553,1064.041 3204.2488,1063.7712 Q3204.8423,1063.5015 3205.4731,1062.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="3216.5" y="1064.5352">GraphSyncResponse</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3188.5" x2="3335.5" y1="1076" y2="1076"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="3193.5" y="1090.6348">RequestId int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="3193.5" y="1103.5898">Status GraphSyncStatus</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3188.5" x2="3335.5" y1="1109.9102" y2="1109.9102"/><!--class GraphSyncMessage--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="73.9102" id="GraphSyncMessage" style="stroke: #A80036; stroke-width: 1.5;" width="205" x="3159.5" y="1438"/><ellipse cx="3202.4" cy="1454" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3198.3277,1449.7651 L3198.3277,1447.6069 L3205.7071,1447.6069 L3205.7071,1449.7651 L3203.2418,1449.7651 L3203.2418,1457.8418 L3205.7071,1457.8418 L3205.7071,1460 L3198.3277,1460 L3198.3277,1457.8418 L3200.7931,1457.8418 L3200.7931,1449.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="111" x="3222.6" y="1458.5352">GraphSyncMessage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3160.5" x2="3363.5" y1="1470" y2="1470"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3160.5" x2="3363.5" y1="1478" y2="1478"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="175" x="3165.5" y="1492.6348">Requests() : []GraphSyncRequest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="193" x="3165.5" y="1505.5898">Responses() : []GraphSyncResponse</text><!--class Exportable--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="73.9102" id="Exportable" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="3057.5" y="1044"/><ellipse cx="3072.5" cy="1060" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3068.4277,1055.7651 L3068.4277,1053.6069 L3075.8071,1053.6069 L3075.8071,1055.7651 L3073.3418,1055.7651 L3073.3418,1063.8418 L3075.8071,1063.8418 L3075.8071,1066 L3068.4277,1066 L3068.4277,1063.8418 L3070.8931,1063.8418 L3070.8931,1055.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="63" x="3086.5" y="1064.5352">Exportable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3058.5" x2="3151.5" y1="1076" y2="1076"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3058.5" x2="3151.5" y1="1084" y2="1084"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="3063.5" y="1098.6348">ToProtoV0()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="3063.5" y="1111.5898">ToProtoV1()</text><!--class go-filecoin--><rect fill="#FEFECE" filter="url(#f1o7j4nhm0njmc)" height="86.8652" id="go-filecoin" style="stroke: #A80036; stroke-width: 1.5;" width="186" x="1261" y="43"/><ellipse cx="1319.25" cy="59" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1322.2231,64.6431 Q1321.6421,64.9419 1321.0029,65.0913 Q1320.3638,65.2407 1319.6582,65.2407 Q1317.1514,65.2407 1315.8315,63.5889 Q1314.5117,61.937 1314.5117,58.8159 Q1314.5117,55.6865 1315.8315,54.0347 Q1317.1514,52.3828 1319.6582,52.3828 Q1320.3638,52.3828 1321.0112,52.5322 Q1321.6587,52.6816 1322.2231,52.9805 L1322.2231,55.7031 Q1321.5923,55.1221 1320.9988,54.8523 Q1320.4053,54.5825 1319.7744,54.5825 Q1318.4297,54.5825 1317.7449,55.6492 Q1317.0601,56.7158 1317.0601,58.8159 Q1317.0601,60.9077 1317.7449,61.9744 Q1318.4297,63.041 1319.7744,63.041 Q1320.4053,63.041 1320.9988,62.7712 Q1321.5923,62.5015 1322.2231,61.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="1339.75" y="63.5352">go-filecoin</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1262" x2="1446" y1="75" y2="75"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="1267" y="89.6348">graphSync : GraphSync</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="1267" y="102.5898">selectorQuerier: SelectorQuerier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="1267" y="115.5449">host: libp2pHost.Host</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1262" x2="1446" y1="121.8652" y2="121.8652"/><path d="M740.5,253 L740.5,278.3105 L1007.5,278.3105 L1007.5,263 L997.5,253 L740.5,253 " fill="#FBFB77" filter="url(#f1o7j4nhm0njmc)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M997.5,253 L997.5,263 L1007.5,263 L997.5,253 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="746.5" y="270.5684">Is this the right name for this package?</text><!--link GMN3 to go-selector--><path d="M874,278.1843 C874,297.169 874,334.355 874,368.0824 C874,369.1364 874,370.187 874,371.2336 C874,371.7569 874,372.2791 874,372.8003 C874,373.0609 874,373.3212 874,373.5813 " fill="none" id="GMN3-go-selector" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link GraphSync to SelectorQuerier--><path d="M1488.288,337.8106 C1415.2674,359.5654 1338.1676,382.5356 1276.2385,400.9859 " fill="none" id="GraphSync-SelectorQuerier" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1500.9163,334.0483,1494.024,331.928,1489.4159,337.4747,1496.3082,339.595,1500.9163,334.0483" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Receiver to GraphSync--><path d="M2249.0383,810.976 C2282.6057,802.5348 2318.3522,794.5612 2352,789 C2444.1241,773.774 3190,819.3739 3190,726 C3190,438 3190,438 3190,438 C3190,302.9586 2111.8827,359.049 1979,335 C1973.0601,333.925 1967.0569,332.7701 1961.0138,331.5467 " fill="none" id="Receiver-GraphSync" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2250.6717,817.7837,2229.5585,815.9854,2247.1848,804.2248,2250.6717,817.7837" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="3191" y="596.0684">receiver for</text><!--link GraphSyncNetwork to libP2PGraphSyncNetwork--><path d="M1850.034,893.96 C1955.1725,915.3493 2059,939.5078 2059,951.5 C2059,951.5 2059,951.5 2059,1205.5 C2059,1243.2562 2299.6812,1270.9769 2434.3592,1283.533 " fill="none" id="GraphSyncNetwork-libP2PGraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1848.6328,900.8185,1830.4118,890.002,1851.4011,887.0949,1848.6328,900.8185" style="stroke: #A80036; stroke-width: 1.0;"/><!--link goGraphSyncNetworkPF to libP2PGraphSyncNetwork--><path d="M2523,872.2517 C2523,892.107 2523,923.9679 2523,951.5 C2523,951.5 2523,951.5 2523,1205.5 C2523,1226.1328 2523,1249.5664 2523,1266.6764 " fill="none" id="goGraphSyncNetworkPF-libP2PGraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link SelectorQuerier to RequestManager--><path d="M1394.7591,473.9562 C1397.5207,474.3091 1400.2685,474.6572 1403,475 C1535.5616,491.6346 1568.6063,498.5563 1702,506 C1756.2508,509.0273 2626.4142,505.007 2680,514 C2710.0419,519.0417 2741.4686,527.4199 2771.0767,536.8357 " fill="none" id="SelectorQuerier-RequestManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2783.6452,540.9279,2779.1784,535.2669,2772.2348,537.2128,2776.7016,542.8738,2783.6452,540.9279" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RequestManager to GraphSyncNetwork--><path d="M2709.9218,643.6246 C2699.8362,645.5984 2689.8206,647.4088 2680,649 C2548.0297,670.3827 2512.2386,651.3448 2380,671 C2144.302,706.0328 2087.8735,730.0231 1857,789 C1824.7689,797.2335 1790.1261,806.7828 1757.9483,815.9525 " fill="none" id="RequestManager-GraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2722.7247,641.0412,2716.0521,638.307,2710.9618,643.4147,2717.6344,646.1489,2722.7247,641.0412" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GraphSync to RequestManager--><path d="M1974.0629,333.676 C1975.7141,334.1195 1977.36,334.5609 1979,335 C2289.6107,418.1682 2371.617,422.9183 2680,514 C2707.8568,522.2276 2737.3996,531.6383 2765.6778,540.9901 " fill="none" id="GraphSync-RequestManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1961.307,330.2376,1966.0592,335.6613,1972.8935,333.3608,1968.1413,327.937,1961.307,330.2376" style="stroke: #A80036; stroke-width: 1.0;"/><!--link SelectorQuerier to ResponseManager--><path d="M1394.7691,473.8799 C1397.5275,474.257 1400.272,474.6305 1403,475 C1514.3862,490.0861 1542.0558,495.8532 1654,506 C1715.1855,511.546 1732.1549,500.1081 1792,514 C1820.0976,520.5223 1849.3803,531.0085 1876.0709,542.17 " fill="none" id="SelectorQuerier-ResponseManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1888.1382,547.334,1884.1957,541.2961,1877.1059,542.613,1881.0484,548.6509,1888.1382,547.334" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ResponseManager to GraphSyncNetwork--><path d="M1907.7441,642.5235 C1841.078,693.5952 1740.5922,770.5755 1681.4109,815.9133 " fill="none" id="ResponseManager-GraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1918.1417,634.5581,1910.9462,635.0316,1908.6157,641.8558,1915.8113,641.3823,1918.1417,634.5581" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GraphSync to ResponseManager--><path d="M1791.4342,346.1202 C1839.0786,409.6786 1903.6994,495.8839 1942.196,547.239 " fill="none" id="GraphSync-ResponseManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1783.3441,335.3279,1783.7424,342.528,1790.5418,344.9296,1790.1435,337.7295,1783.3441,335.3279" style="stroke: #A80036; stroke-width: 1.0;"/><!--link goGraphSyncMessagePF to libP2PGraphSyncNetwork--><path d="M2831.3181,1100.0065 C2769.4656,1138.3222 2629.9166,1224.7685 2561.8314,1266.9451 " fill="none" id="goGraphSyncMessagePF-libP2PGraphSyncNetwork" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link Exportable to GraphSyncMessage--><path d="M3133.5942,1118.0406 C3149.0479,1141.7174 3165,1173.8283 3165,1205.5 C3165,1205.5 3165,1205.5 3165,1376.5 C3165,1394.4611 3173.2892,1410.3385 3185.0213,1423.8156 " fill="none" id="Exportable-GraphSyncMessage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="3190.0989,1418.9908,3199.4717,1437.9949,3180.2936,1428.9837,3190.0989,1418.9908" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GraphSyncRequest to GraphSyncMessage--><path d="M3389.1056,1144.0582 C3378.2202,1162.6854 3370,1183.902 3370,1205.5 C3370,1205.5 3370,1205.5 3370,1376.5 C3370,1397.4103 3358.8112,1415.0644 3343.6364,1429.3922 " fill="none" id="GraphSyncRequest-GraphSyncMessage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3333.7371,1437.8828,3340.8955,1437.0127,3342.8456,1430.0703,3335.6872,1430.9404,3333.7371,1437.8828" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GraphSyncResponse to GraphSyncMessage--><path d="M3262,1118.0445 C3262,1142.8042 3262,1176.1042 3262,1205.5 C3262,1205.5 3262,1205.5 3262,1376.5 C3262,1392.1071 3262,1409.1051 3262,1424.5188 " fill="none" id="GraphSyncResponse-GraphSyncMessage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3262,1437.5814,3266,1431.5814,3262,1425.5814,3258,1431.5814,3262,1437.5814" style="stroke: #A80036; stroke-width: 1.0;"/><!--link go-filecoin to GraphSync--><path d="M1457.6684,135.7219 C1496.7654,154.2852 1542.0145,175.7695 1584.3069,195.85 " fill="none" id="go-filecoin-GraphSync" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1445.7425,130.0594,1449.4469,136.2462,1456.5827,135.2063,1452.8782,129.0195,1445.7425,130.0594" style="stroke: #A80036; stroke-width: 1.0;"/><!--link go-filecoin to goGraphsyncPf--><path d="M1447.16,91.9234 C1570.4336,100.653 1793.7771,121.8743 1979,169 C2055.4633,188.4543 2140.3585,224.2782 2189.2297,246.3803 " fill="none" id="go-filecoin-goGraphsyncPf" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link go-filecoin to goGraphSyncNetworkPF--><path d="M1447.2547,87.3458 C1824.6969,91.1665 3222.3472,109.3092 3294,169 C3327.7982,197.1557 3316,221.5107 3316,265.5 C3316,265.5 3316,265.5 3316,726 C3316,752.3275 3315.0904,765.2414 3294,781 C3245.7732,817.0347 2887.5618,837.8924 2676.774,847.1698 " fill="none" id="go-filecoin-goGraphSyncNetworkPF" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link go-filecoin to Selector--><path d="M1260.8247,88.8207 C1056.2843,94.869 574.0288,114.6079 421,169 C267.7972,223.454 240.3446,266.9106 118,374 C104.2291,386.0538 90.5327,401.2991 80.0182,413.8864 " fill="none" id="go-filecoin-Selector" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link go-filecoin to SelectorQuerier--><path d="M1322.1726,141.8828 C1280.5967,214.229 1208.9235,338.9475 1173.3335,400.8775 " fill="none" id="go-filecoin-SelectorQuerier" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1328.825,130.307,1322.3673,133.5161,1322.8458,140.7113,1329.3035,137.5022,1328.825,130.307" style="stroke: #A80036; stroke-width: 1.0;"/><!--link go-filecoin to goSelectorPF--><path d="M1260.8483,93.7152 C1110.1059,106.2203 819.8129,133.9731 723,169 C553.0254,230.4969 380.0564,368.4204 320.069,418.9662 " fill="none" id="go-filecoin-goSelectorPF" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--link SelectionResponse to SelectionTraverser--><!--link SelectionResponse to GetBlockFunc--><!--
@startuml "GraphSync"

note top of "go-selector"
  Is this the right name for this package?
end note

package "go-selector" {

  interface Selector {
  }
  
  interface SelectionResponse {
  }
  
  interface SelectionTraverser {
    Next() SelectionResponse, err
    Cancel()
  }

  interface "GetBlockFunc func(cid) block.Block" as GetBlockFunc

  interface SelectorQuerier {
    Select(Selector, root Node) SelectionTraverser
    Validate(Selector, root Node, incomingResponses SelectionTraverser) SelectionTraverser
  }

  object "Package Public Functions" as goSelectorPF {
    NewSelectorQuerier(getBlockFunc GetBlockFunc) SelectorQuerier
  }
}

package "go-graphsync" {
    class GraphSync {
      network : GraphySyncNetwork
      requestManager : RequestManager
      responseManager: ResponseManager
      selectorQuerier: SelectorQuerier

      Request(p peer.ID, selector Selector, root Node) SelectionTraverser
      ReceiveMessage(ctx context.Context, sender peer.ID, incoming GraphSyncMessage)
      ReceiveError(error)
    }
  
  GraphSync *- - SelectorQuerier

  package network {
    interface Receiver {
      ReceiveMessage(ctx context.Context, sender peer.ID, incoming GraphSyncMessage)
      ReceiveError(error)
    }

    interface GraphSyncNetwork {
      SendMessage(ctx context.Context, receiver peer.Id, m GraphSyncMessage)
      SetDelegate(receiver Receiver)
    }

    Receiver <|- - GraphSync : receiver for

    class libP2PGraphSyncNetwork {

    }
    GraphSyncNetwork <|- - libP2PGraphSyncNetwork
    
    object "Package Public Functions" as goGraphSyncNetworkPF {
      NewLibP2PNetwork(host libp2pHost.Host) GraphSyncNetwork
    }
    goGraphSyncNetworkPF .. libP2PGraphSyncNetwork 
  }

  package requestmanager {
  class RequestManager {
    network : GraphSyncNetwork
    selectorQuerier: SelectorQuerier

    SendRequest(p peer.ID, selector Selector, node rootNode) SelectionTraverser
    ProcessResponses(responses []GraphSyncResponse)
  }
  SelectorQuerier - -* RequestManager
  RequestManager *- - GraphSyncNetwork
  GraphSync *- - RequestManager
  note as requestManager
    The ResponseManager uses Validate from go-selector
    to filter incoming Responses based on whether they are valid and produce
    a traverser that only returns valid responses
  end note
  }

  package responsemanager {
  class ResponseManager {
    network : GraphySyncNetwork
    selectorQuerier: SelectorQuerier
    ProcessRequests(p peer.ID, requests []GraphSyncRequests)
  }
  SelectorQuerier - -* ResponseManager
  ResponseManager *- - GraphSyncNetwork
  GraphSync *- - ResponseManager
  note as responseManagerNote
    The ResponseManager uses Select from go-selector
    to translate the raw bytes into a selector and then
    traverse the graph to produce a list of blocks

    Question: how to know if response is partial?
  end note
  }
  package message {
    object "Package Public Functions" as goGraphSyncMessagePF {
      func FromPBReader(pbr ggio.Reader) (GraphSyncMessage, error)
    }
    goGraphSyncMessagePF .. libP2PGraphSyncNetwork

    class GraphSyncRequest {
      Selector Selector
      Root     Node
      Priority Priority
      {field} Expires time.Duration
      Id       int
      IsCancel bool
    }

    class GraphSyncResponse {
      RequestId int
      Status GraphSyncStatus
    }

    interface GraphSyncMessage {
      Requests() : []GraphSyncRequest
      Responses() : []GraphSyncResponse
    }

    interface Exportable {
      ToProtoV0()
      ToProtoV1()
	  }

    Exportable - -|> GraphSyncMessage
    GraphSyncRequest - -* GraphSyncMessage
    GraphSyncResponse - -* GraphSyncMessage
    
  }

  object "PackagePublicFunctions" as goGraphsyncPf {
    New(ctx context.Context, network GraphSyncNetwork, getBlockFunc GetBlockFunc) GraphSync
  }

}

package "go-filecoin" {
  class "go-filecoin" {
    graphSync : GraphSync
    selectorQuerier: SelectorQuerier
    host: libp2pHost.Host
  }

  "go-filecoin" *- - GraphSync
  "go-filecoin" .. goGraphsyncPf
  "go-filecoin" .. goGraphSyncNetworkPF
  "go-filecoin" .. Selector
  "go-filecoin" *- - SelectorQuerier
  "go-filecoin" .. goSelectorPF

}

@enduml

PlantUML version 1.2018.12(Sun Oct 21 03:15:15 PDT 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_92-b14
Operating System: Mac OS X
OS Version: 10.13.2
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>